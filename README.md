# smartwatch
这是一个基于esp32s3r8芯片的综合性的嵌入式手表项目，涵盖了计步、音频处理、触摸驱动、LCD 显示、SD 卡读写等多种功能。

## 项目结构

### 主要目录及文件功能
- **`main` 目录**：包含项目的主要源代码。
  - **`QMI8658` 文件夹**：计步相关功能，包括计步模块初始化、动态阈值更新和步数检测等。
    - `step_count.c`：计步核心逻辑实现。
    - `step_count.h`：计步功能的头文件。
  - **`SD_Card` 文件夹**：SD 卡读写功能。
    - `SD_MMC.c`：包含文件读写函数。
  - **`LVGL_UI` 文件夹**：LVGL 图形界面相关代码。
    - `LVGL_Example.h`：LVGL 示例的头文件。
  - **`MIC_Driver` 文件夹**：麦克风语音处理功能。
    - `MIC_Speech.c`：语音初始化和处理逻辑。
    - `MIC_Speech.h`：语音功能的头文件。
  - **`Audio_Driver` 文件夹**：音频驱动相关代码。
    - `PCM5101.c`：I2S 时钟配置和音频写入函数。
  - **`EXIO` 文件夹**：外部输入输出设备控制。
    - `TCA9554PWR.c`：I2C 设备数据读写函数。
  - **`Touch_Driver` 文件夹**：触摸驱动相关代码。
    - `CST816.c`：触摸数据读取和芯片 ID 读取函数。
  - **`PCF85063` 文件夹**：RTC 时钟芯片操作。
    - `PCF85063.c`：读取 RTC 闹钟时间函数。
  - **`ui` 目录**：用户界面相关代码，包含各种屏幕界面和主题管理。
    - `CMakeLists.txt`：UI 模块的 CMake 配置文件。
- **`main.c`**：项目主函数，初始化各种硬件和驱动，并进入主循环。

## 主要功能模块

### 计步功能
- 通过 `QMI8658` 传感器获取加速度数据。
- 在 `step_count.c` 中实现动态阈值更新和步数检测逻辑。
- `Step_Process_Task` 任务在 `main.c` 中负责计步处理。

### SD 卡读写功能
- `SD_MMC.c` 中提供了文件读写函数 `s_example_write_file` 和 `s_example_read_file`。

### 语音处理功能
- `MIC_Speech.c` 实现了语音初始化和处理逻辑，包括音频数据采集和语音指令检测。

### 音频驱动功能
- `PCM5101.c` 包含 I2S 时钟配置和音频写入函数。

### 触摸驱动功能
- `CST816.c` 实现了触摸数据读取和芯片 ID 读取功能。

### RTC 时钟功能
- `PCF85063.c` 提供了读取 RTC 闹钟时间的函数。

### LVGL 图形界面功能
- `LVGL_UI` 文件夹中的代码用于实现图形界面，包括示例界面和主题管理。

## 项目进展
- **还未使用的驱动程序**：语音处理模块
- **还想进行完善的功能**：wifi定位，根据定位获取所在地天气信息，实现联网获取时间即SNTP，AI对话
